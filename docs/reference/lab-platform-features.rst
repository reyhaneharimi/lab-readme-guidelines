معرفی قابلیت‌های پیش‌فرض آزمایشگاه:
=================================

* **قابلیت maximum:** باهاش می‌تونیم ظرفیت کل پُرتال رو مشخص کنیم که چند تا سشن بده.
* **قابلیت capacity:** می‌تونیم ظرفیت هر کدوم از ورکشاپ‌ها رو مشخص کنیم.
* **قابلیت reserved:** تعداد نمونه‌ی آماده به کار را مشخص می‌کند که به ازای هر سناریو چقدر باشد. با این قابلیت، سرعت لود سناریوها را افزایش داده و نمونه‌ها را قبل از ورود کاربر آماده نگه می‌داریم. تعداد رزرو و جاری سناریوها نباید از maximum بیشتر باشد و رزروها در حالت stand-by باقی می‌مانند.
* **قابلیت initial:** برای زمانی که ورکشاپ یا رویداد داریم و انتظار حجم بالا داریم؛ این پارامتر تعداد نمونه‌ای که ابتدا ساخته می‌شود را مشخص می‌کند. اگر مقدار آن صفر باشد، نمونه‌ای ساخته نمی‌شود و با ورود کاربران نمونه‌ها ایجاد می‌شوند. اگر مقدار آن بیشتر از reserved باشد، به همان اندازه نمونه ایجاد و اضافه‌ترش بعداً به صورت reserved خواهد بود. اگر کمتر باشد، اول initial ساخته می‌شود، بقیه به صورت reserved ساخته می‌شوند.

.. image:: /_static/config-maximum.png
   :alt: yaml maximum
   :align: center

* **قابلیت labels:** می‌توانیم برای پُرتال و سناریوها لیبل تعیین کنیم (مثلاً سطح سناریو یا نوع کاربر) و بعداً با API یا جستجو از آن استفاده کنیم.
* **قابلیت registered:** محدودیت تعداد سشن همزمان برای کاربران ثبت‌نام شده را کنترل می‌کند.
* **قابلیت anonymous:** محدودیت سشن برای کاربران مهمان. کاربران ناشناس هم می‌توانند چند سناریو را بطور همزمان اجرا کنند اگر این عدد تعیین شده باشد.


.. image:: /_static/config-registered-anonymous.png
   :alt: registered anonymous
   :align: center

* **قابلیت expires:** مقدار زمان session را بر حسب ثانیه، دقیقه یا ساعت تعیین می‌کند. پس از اتمام، session پاک می‌شود. (`expires: 60m`)


  * **قابلیت orphaned:**
  اگر سناریو یا سشن مدتی بلااستفاده و رها باقی بماند (مثلاً کاربر صفحه را می‌بندد یا ارتباط قطع می‌شود)، بعد از مدت مشخص‌شده (مثل ۵ دقیقه)، سشن به صورت خودکار حذف می‌شود.
  این قابلیت مصرف منابع سرور را کنترل کرده و مانع از باقی ماندن sessionهای بدون مصرف می‌شود.

* **قابلیت deadline:**
  حداکثر زمان مجاز هر سناریو است، حتی اگر کاربر بارها از قابلیت تمدید (overtime) استفاده کند، مجموع کل زمانش از این مقدار بالاتر نمی‌رود.
  مثلا اگر deadline روی ۱۲۰ دقیقه باشد، session پس از این مدت چه کاربر تمدید کند چه نکرده باشد، پایان می‌یابد.

* **قابلیت overtime:**
  این قابلیت به کاربر امکان می‌دهد وقتی زمان session رو به اتمام است (و سشن مثلاً به رنگ نارنجی درآمد)، با هربار کلیک، درصد معینی (پیشفرض ۲۵٪) به زمان session خود اضافه کند.
  پارامتر overtime در yaml تعیین‌کننده مقدار هر بار تمدید است و می‌توان بر اساس نیاز تغییر داد.

* **قابلیت overdue:**
  اگر اجرا یا بارگذاری یک سناریو بیش از مقدار مشخصی طول بکشد و کاربر مدت زیادی معطل بماند (مثلاً زیرساخت جواب ندهد)، این قابلیت session را پاک کرده و مجدداً راه‌اندازی می‌کند.
  این موضوع برای رعایت SLO (Service Level Objective) بسیار اهمیت دارد و باعث تجربه کاربری بهتر می‌شود.


.. image:: /_static/config-orphaned-overdue.png
   :alt: پارامترهای orphaned, overdue, deadline, overtime
   :align: write


.. image:: /_static/dockerme5.PNG
   :alt: ﭖﺍﺭﺎﻤﺗﺮﻫﺎﯾ orphaned, overdue, deadline, overtime
   :align: left


---

* **قابلیت updates.workshop=true:**
  اگر ورژنی جدید از ورکشاپ تعریف شود، با فعال شدن این قابلیت ورکشاپ جدید بدون اختلال/توقف sessionهای قدیمی جایگزین می‌شود. کاربران جاری کارشان را تمام می‌کنند و کاربر جدید همیشه با نسخه جدید سروکار خواهد داشت.
  این امکان باعث می‌شود در فرآیند آپدیت هیچ سشن فعالی از بین نرود.

---

* **قابلیت workshop.defaults.refresh:**
  با این پارامتر، ورکشاپ‌ها طبق زمان‌بندی (scheduler) به صورت خودکار refresh می‌شوند: اگر همچنان از نسخه قبلی session فعال وجود داشته باشد ابتدا صبر می‌کند تا این sessionها به پایان برسد و سپس ورکشاپ رفرش و منابع غیرضروری آزاد می‌شوند.
  این کار مصرف منابع را بهینه و محیط را پاکیزه نگه می‌دارد.

